<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Group Info and Messages</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        header {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #4CAF50;
            color: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .header-content {
            display: flex;
            align-items: center;
        }
        .group-emoji {
            font-size: 3em;
            margin-right: 20px;
        }
        h1 {
            margin: 0;
        }
        h2 {
            color: #333;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            background: #fff;
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .message {
            border-left: 5px solid #4CAF50;
            padding-left: 10px;
        }
        .message strong {
            color: #4CAF50;
        }
        .message em {
            color: #666;
            font-size: 0.9em;
        }
        .attachments {
            margin-top: 10px;
        }
        .attachments strong {
            display: block;
            margin-bottom: 5px;
        }
        .attachments ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        .attachments a {
            color: #4CAF50;
            text-decoration: none;
        }
        .attachments a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
<header>
    <div class="header-content">
        <span class="group-emoji">{{ group_info.emoji_id }}</span>
        <h1>{{ group_info.name }}</h1>
    </div>
</header>
    <h2>Members</h2>
    <ul>
        {% for member in group_info.members %}
            <li class="member" style="color: {{ member_colors[member.name] }}">{{ member.name }} ({{ member.email }})</li>
        {% endfor %}
    </ul>

    <h2>Messages</h2>
    <ul>
        {% for message in messages.messages %}
            <li class="message">
                <strong class="member" style="color: {{ member_colors[message.creator.name] }}">{{ message.creator.name }}:</strong> {{ message.text }}<br>
                <em>{{ message.created_date }}</em><br>
                {% if message.attached_files %}
                    <div class="attachments">
                        <strong>Attachments:</strong>
                        <ul>
                            {% for file in message.attached_files %}
                                <li>
                                    {% if file.original_name.endswith('.jpg') or file.original_name.endswith('.jpeg') or file.original_name.endswith('.png') or file.original_name.endswith('.gif') %}
                                        <img src="{{ url_for('media', filename=file.export_name) }}" alt="{{ file.original_name }}" style="max-width: 100%; height: auto;">
                                    {% elif file.original_name.endswith('.mp3') or file.original_name.endswith('.wav') %}
                                        <audio controls>
                                            <source src="{{ url_for('media', filename=file.export_name) }}" type="audio/{{ file.original_name.split('.')[-1] }}">
                                            Your browser does not support the audio element.
                                        </audio>
                                    {% else %}
                                        <a href="{{ url_for('media', filename=file.export_name) }}">{{ file.original_name }}</a>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    </div>
                {% endif %}
            </li>
        {% endfor %}
    </ul>
</body>
</html>